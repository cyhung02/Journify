<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>離線 - Tripilot</title>
    <meta name="theme-color" content="#F9A8D4">
    <link rel="icon" type="image/svg+xml" href="/sakura-icon.svg">
    <style>
        :root {
            --color-pink-50: #FDF2F8;
            --color-pink-100: #FCE7F3;
            --color-pink-200: #FBCFE8;
            --color-pink-300: #F9A8D4;
            --color-pink-400: #F472B6;
            --color-pink-500: #EC4899;
            --color-pink-600: #DB2777;
            --color-pink-700: #BE185D;
            --color-pink-800: #9D174D;
            --color-pink-900: #831843;
            --color-gray-500: #6B7280;
            --color-gray-600: #4B5563;
            --color-gray-700: #374151;
            --color-yellow-50: #FFFBEB;
            --color-yellow-100: #FEF3C7;
            --color-yellow-600: #D97706;
            --color-yellow-700: #B45309;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
            background-color: var(--color-pink-50);
            color: var(--color-gray-600);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.5;
        }

        header {
            background-color: var(--color-pink-100);
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .sakura-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0.1;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .sakura-1 {
            position: absolute;
            width: 5rem;
            height: 5rem;
            top: -2.5rem;
            left: -2.5rem;
            transform: rotate(15deg);
        }

        .sakura-2 {
            position: absolute;
            width: 4rem;
            height: 4rem;
            top: 2.5rem;
            right: 5rem;
            transform: rotate(45deg);
        }

        h1 {
            color: var(--color-pink-800);
            font-size: 1.5rem;
            margin: 0;
            position: relative;
            z-index: 1;
        }

        @media (min-width: 768px) {
            h1 {
                font-size: 1.875rem;
            }
        }

        .subtitle {
            color: var(--color-pink-600);
            font-size: 0.875rem;
            font-weight: 500;
            margin: 0.25rem 0 0;
            position: relative;
            z-index: 1;
        }

        @media (min-width: 768px) {
            .subtitle {
                font-size: 1rem;
            }
        }

        main {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        .content {
            max-width: 28rem;
            width: 100%;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid var(--color-pink-200);
            padding: 2rem;
        }

        .icon-container {
            margin: 0 auto 1.5rem;
            width: 5rem;
            height: 5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon {
            width: 100%;
            height: 100%;
            color: var(--color-pink-400);
            animation: pulse 2s infinite;
        }

        @keyframes rotation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                opacity: 0.7;
            }

            50% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(0.95);
                opacity: 0.7;
            }
        }

        h2 {
            color: var(--color-pink-800);
            font-size: 1.5rem;
            text-align: center;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        .description {
            color: var(--color-pink-600);
            text-align: center;
            margin-bottom: 2rem;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        @media (min-width: 640px) {
            .button-container {
                flex-direction: row;
                justify-content: center;
            }
        }

        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .button-primary {
            background-color: var(--color-pink-500);
            color: white;
        }

        .button-primary:hover {
            background-color: var(--color-pink-600);
        }

        .button-secondary {
            background-color: #E5E7EB;
            color: var(--color-gray-700);
        }

        .button-secondary:hover {
            background-color: #D1D5DB;
        }

        .button-icon {
            margin-right: 0.375rem;
            width: 1rem;
            height: 1rem;
        }

        .tip-container {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: var(--color-yellow-50);
            border: 1px solid var(--color-yellow-100);
            border-radius: 0.375rem;
        }

        .tip-title {
            color: var(--color-yellow-700);
            font-size: 0.875rem;
            font-weight: 500;
            margin-top: 0;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .tip-icon {
            width: 1rem;
            height: 1rem;
            margin-right: 0.375rem;
        }

        .tip-text {
            color: var(--color-yellow-600);
            font-size: 0.75rem;
            margin: 0;
        }

        footer {
            background-color: var(--color-pink-100);
            padding: 1rem;
            text-align: center;
            color: var(--color-pink-600);
            font-size: 0.875rem;
            position: relative;
            overflow: hidden;
        }

        .footer-sakura {
            position: absolute;
            width: 4rem;
            height: 4rem;
            bottom: 0.5rem;
            right: 2.5rem;
            opacity: 0.1;
            transform: rotate(30deg);
            pointer-events: none;
        }
    </style>
</head>

<body>
    <header>
        <div class="sakura-bg">
            <svg class="sakura-1" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M50 15c5-5 15-15 20-10 10 5 25 25 20 40S70 80 50 85c-20-5-35-25-40-40S20 10 30 5c5-5 15 5 20 10"
                    fill="#F472B6" />
            </svg>
            <svg class="sakura-2" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M50 15c5-5 15-15 20-10 10 5 25 25 20 40S70 80 50 85c-20-5-35-25-40-40S20 10 30 5c5-5 15 5 20 10"
                    fill="#F472B6" />
            </svg>
        </div>
        <div class="container">
            <h1>Tripilot</h1>
            <p class="subtitle">您的隨行旅遊指南</p>
        </div>
    </header>

    <main>
        <div class="content">
            <div class="icon-container">
                <svg class="icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M50 15c5-5 15-15 20-10 10 5 25 25 20 40S70 80 50 85c-20-5-35-25-40-40S20 10 30 5c5-5 15 5 20 10"
                        fill="currentColor" />
                </svg>
            </div>

            <h2>您目前處於離線狀態</h2>
            <p class="description">無法連接到網路，但您仍可查看已儲存的行程內容</p>

            <div class="button-container">
                <a href="/" class="button button-secondary">
                    返回首頁
                </a>
                <button onclick="window.location.reload()" class="button button-primary">
                    <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 2v6h-6M3 12a9 9 0 0 1 15-6.7L21 8M3 22v-6h6M21 12a9 9 0 0 1-15 6.7L3 16" />
                    </svg>
                    重新連接
                </button>
            </div>

            <div class="tip-container">
                <h3 class="tip-title">
                    <svg class="tip-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    離線使用提示
                </h3>
                <p class="tip-text">
                    您可以將此旅遊手冊安裝到您的裝置上，以便在沒有網路連接的情況下也能查看行程。只需點擊瀏覽器的「安裝應用」選項即可。
                </p>
            </div>
        </div>
    </main>

    <footer>
        <svg class="footer-sakura" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M50 15c5-5 15-15 20-10 10 5 25 25 20 40S70 80 50 85c-20-5-35-25-40-40S20 10 30 5c5-5 15 5 20 10"
                fill="#F472B6" />
        </svg>
        <div>© 2025 Tripilot</div>
    </footer>

    <script>
        // 簡單的重連功能
        let reconnectCount = 0;

        document.querySelector('button').addEventListener('click', function () {
            reconnectCount++;
            const buttonIcon = this.querySelector('svg');
            applyRotation(buttonIcon);

            if (reconnectCount > 1) {
                this.innerHTML = `
                    <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 2v6h-6M3 12a9 9 0 0 1 15-6.7L21 8M3 22v-6h6M21 12a9 9 0 0 1-15 6.7L3 16" />
                    </svg>
                    正在重試連接...
                `;
                applyRotation(this.querySelector('.button-icon'));
            }

            setTimeout(() => {
                window.location.reload();
            }, 800);
        });

        // 將日期顯示在介面上
        document.addEventListener('DOMContentLoaded', function () {
            try {
                const lastOnlineTime = localStorage.getItem('lastOnlineTime');
                if (lastOnlineTime) {
                    const date = new Date(lastOnlineTime);
                    const options = {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    };
                    const formattedTime = new Intl.DateTimeFormat('zh-TW', options).format(date);

                    // 在描述下方添加上次在線時間
                    const descriptionEl = document.querySelector('.description');
                    const timeInfoEl = document.createElement('p');
                    timeInfoEl.style.fontSize = '0.8rem';
                    timeInfoEl.style.marginTop = '0.5rem';
                    timeInfoEl.style.color = '#9D174D';
                    timeInfoEl.textContent = `上次連接時間: ${formattedTime}`;
                    descriptionEl.parentNode.insertBefore(timeInfoEl, descriptionEl.nextSibling);
                }
            } catch (e) {
                console.error('無法獲取最後在線時間', e);
            }
        });

        // 設定旋轉動畫
        const applyRotation = (element) => {
            element.style.animation = 'rotation 1s linear infinite';
        };
    </script>
</body>

</html>